# 01. 협력하는 객체들의 공동체

## 객체지향의 목표

객체지향의 목표는 실세계를 모방하는 것이 아니다. 오히려 새로운 세계를 창조하는 것이다.

## 객체들의 관계

**협력**: 요청과 응답으로 구성됨
**역할**과 **책임**: 협력하는 과정 속에서 특정한 역할을 부여받고 역할에 적합한 책임(행동)을 수행한다

- 여러 객체가 동일한 역할을 수행할 수 있다
- 역할은 대체 가능성을 의미한다 (어떤 객체가 역할을 수행하든 상관없다)
- 책임을 수행하는 방법은 자율적으로 선택할 수 있다 (다형성)
- 한 객체가 동시에 여러 역할을 수행할 수 있다

## 객체

**상태, 행동, 식별자**를 지닌 실체

### 객체의 특징

- 객체는 상태를 가지며 상태는 변경 가능하다
- 객체의 상태를 변경시키는 것은 객체의 행동이다
- 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다

### 상태와 행동 사이 관계

- 객체의 행동은 상태에 영향을 받는다
- 객체의 행동은 상태를 변경시킨다

### 행동의 부수효과

- 객체 자신의 상태 변경
- 행동 내에서 협력하는 다른 객체에 대한 메시지 전송

### 상태 캡슐화

- a객체는 b객체의 상태를 변경할 수 없다. 단지 메시지를 전달할 수 있을 뿐이다. b객체의 상태를 변경하는 것은 b객체의 몫이다.
- 상태를 외부에 노출시키지 않고 행동을 경계로 캡슐화하는 것은 결과적으로 객체의 자율성을 높인다

# 02. 이상한 나라의 객체

## 행동이 상태를 결정한다

상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 나쁜 영향을 끼친다

1. 상태를 먼저 결정할 경우 캡슐화가 저해된다
2. 객체를 협력자가 아닌 고립된 섬으로 만든다
3. 객체의 재사용성이 저하된다

객체는 다른 객체와 협력하기 위해 존재한다. 객체의 행동은 객체가 협력에 참여하는 유일한 방법이다.<br />
따라서 먼저 객체의 행동을 결정하고 그 후에 행동에 적절한 상태를 선택하게 된다

# 03. 타입과 추상화

## 추상화

어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생력하거나 감춤으로써 복잡도를 극복하는 방법

복잡성을 다루기 위해 추상화는 두 차원에서 이뤄진다

1. 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것이다
2. 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것이다

모든 경우에 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것이다

## 타입

타입은 개념과 동일하다. 따라서 타입이란 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념을 의미한다<br />
어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다

**객체의 타입을 결정하는 것은 객체의 행동뿐이다** (행동이 우선이다, 책임-주도 설계)

## 일반화/특수화

일반화/특수화는 행동에 관한 것이다.

- 일반적인 타입은 특수한 타입보다 더 적은 수의 행동을 가지지만 더 큰 크기의 외연 집합을 가진다.
- 특수한 타입은 일반적인 타입보다 더 많은 수의 행동을 가지지만 더 적은 크기의 외연 집합을 가진다.

- 슈퍼타입: 일반적인 타입
- 서브타입: 특수한 타입

슈퍼타입과 서브타입에서 중요한 것은 두 타입 간의 관계가 행동에 의해 결정된다는 것이다.<br />
즉, 어떤 타입이 다른 타입의 서브타입이 되기 위해서는 행위적 호환성을 만족시켜야 한다.<br />
=> 서브타입은 슈퍼타입을 대체할 수 있어야 한다. **리스코프 치환 원칙**

## 정적 모델 (타입 모델)

타입의 목적: 타입을 사용하는 이유는 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문이다.<br />
타입은 추상화다: 타입을 이용하면 객체의 동적인 특성을 추상화할 수 있다.

# 04. 역할, 책임, 협력

## 책임

객체의 책임을 크게 '하는 것'과 '아는 것'의 두 가지 범주로 자세히 분류할 수 있다<br />
객체지향 설계는 협력에 참여하기 위해 어떤 객체가 어떤 책임을 수행해야 하고 어떤 객체로부터 메시지를 수신할 것인지를 결정하는 것으로부터 시작된다.

## 역할

역할의 개념을 사용하면 유사한 협력을 추상화해서 인지 과부하를 줄일 수 있다.<br />
다양한 객체들이 협력에 참여할 수 있기 때문에 협력이 좀 더 유연해지며 다양한 객체들이 동일한 협력에 참여할 수 있기 때문에 재사용성이 높아진다.

역할은 객체지향 설계의 **단순성, 유연성, 재사용성**을 뒷받침하는 핵심 개념이다.

## 협력

올바른 객체를 설계하기 위해서는 먼저 견고하고 깔끔한 협력을 설계해야 한다.<br />
협력이라는 문맥에서 객체가 수행하게 될 적절한 책임, 즉 행동을 결정한 후에 그 행동을 수행하는 데 필요한 데이터를 고민해야 한다.

## 객체지향 설계 기법

1. 책임-주도 설계
2. 디자인 패턴
3. 테스트 주도 개발 (테스트를 작성해가며 협력을 설계한다)

# 05. 책임과 메시지

하나의 객체는 메시지를 전송함으로써 다른 객체에 접근한다

송신자는 수신자에 대해 매우 적은 정보만 알고 있더라도 상호 협력이 가능하다 (**협력의 유연성, 확장성, 재사용성**)

## 메서드

메시지는 '어떻게' 수행될 것인지는 명시하지 않는다. <br />
메시지는 단지 오퍼레이션을통해 '무엇'이 실행되기를 바라는지만 명시하며,<br />
어떤 메서드를 선택할 것인지는 전적으로 수신자의 결정에 좌우된다. (다형성, 메시지:메서드 = 1:N)

(이것은 프로시저 호출에 대한 실행 코드를 컴파일 시간에 결정하는 절차적인 언어와 확연히 구분되는 특징이다.)

## 다형성

서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것.<br />
(서로 다른 타입에 속하는 객체들이 동일한 메시지를 수신할 경우 서로 다른 메서드를 이용해 메시지를 처리할 수 있는 메커니즘을 가리킨다.)

다형성은 객체들의 **대체 가능성**을 이용해 설계를 유연하고 재사용 가능하게 만든다

## 메시지

객체지향 애플리케이션은 메시지를 통해 정의된다<br />
객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 해야한다.<br />
메시지가 객체를 선택하게 만들려면 메시지를 중심으로 협력을 설계해야 한다.<br />
결과적으로 메시지가 수신자의 책임을 결정한다

묻지 말고 시키기: 객체는 다른 객체의 상태를 묻지말아야한다

## What/Who 사이클

어떤 행위가 필요한지를 먼저 결정한 후에 이 행위를 수행할 객체를 결정한다.

## 인터페이스

객체가 다른 객체와 상호작용하는 유일한 방법은 메시지이다.<br />
따라서 메시지가 객체의 인터페이스를 결정한다.

인터페이스 세 가지 원칙

1. 좀 더 추상적인 인터페이스
2. 최소 인터페이스
3. 인터페이스와 구현 간에 차이가 있음 <br/>
(인터페이스와 구현의 분리 원칙: 객체를 설계할 때 객체 외부에 노출되는 인터페이스와 객체의 내부에 숨겨지는 구현을 명확하게 분리해서 고려해야 한다)

## 책임의 자율성이 협력의 품질을 결정한다

1. 자율적인 책임은 협력을 단순하게 만든다
2. 자율적인 책임은 모자 장수의 외부와 내부를 명확하게 분리한다
3. 책임이 자율적일 경우 책임을 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않는다
4. 자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다
5. 객체가 수행하는 책임들이 자율적일수록 객체의 역할을 이해하기 쉬워진다

# 06. 객체 지도

객체지향 세계를 구축하기 위해서는 사용자에게 제공할 '기능'과 기능을 담을 안정적인 '구조'라는 재료가 준비돼 있어야 한다.

- 도메인 모델링: 구조를 수집하고 표현하기 위한 기법
- 유스케이스 모델링: 기능을 수집하고 표현하기 위한 기법

객체지향을 사용하면 사용자들이 이해하고 있는 도메인의 구조와 최대한 유사하게 코드를 구조화할 수 있다.<br />
객체지향은 사람들이 만지고 느끼고 볼 수 있는 실체를 시스템 안의 객체로 재창조할 수 있게 해준다.

# 07. 함께 모으기

## 도메인 개념을 참조하는 이유

어떤 메시지가 있을 때 그 메시지를 수신할 객체를 어떻게 선택하는가?

첫번째 전략은 도메인 개념 중에서 가장 적절한 것을 선택하는 것이다.<br />
도메인 개념 안에서 적절한 객체를 선택하는 것은 도메인에 대한 지식을 기반으로 코드의 구조와 의미를 쉽게 유추할 수 있게 한다.
