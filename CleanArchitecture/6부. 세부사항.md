# 6부. 세부사항

# 30장. 데이터베이스는 세부사항이다

애플리케이션 내부 데이터의 구조는 시스템 아키텍처에서 대단히 중요하다.

하지만 데이터베이스는 데이터 모델이 아니다. 데이터베이스는 일개 소프트웨어일 뿐이다.<br />
데이터베이스는 데이터에 접근할 방법을 제공하는 유틸리티다.

아키텍처 관점에서 보면 이러한 유틸리티는 저수준의 세부사항일 뿐이라서 아키텍처와는 관련이 없다.<br />
그리고 뛰어난 아키텍트라면 저수준의 세부사항이 시스템 아키텍처를 오염시키는 일을 용납하지 않는다.

애플리케이션의 유스케이스는 데이터를 테이블에 행 단위로 배치한다는 것이나 데이터가 테이블 구조를 가진다는 사실을 알아서는 안된다.<br />
많은 데이터 접근 프레임워크가 테이블과 행이 객체 형태로 시스템 여기저기에서 돌아다니게 허용하는데, 아키텍처적으로 잘못된 설계다.<br />
이렇게 하면 유스케이스, 업무 규칙, 심지어는 UI조차도 관계형 데이터 구조에 결합되어 버린다.

# 31장. 웹은 세부사항이다.

GUI는 세부사항이다. 웹은 GUI다, 따라서 웹은 세부사항이다.<br />
아키텍트라면 세부사항을 핵심 업무 로직에서 분리된 경계 바깥에 두어야 한다.<br />
웹은 입출력 장치다.

# 32장. 프레임워크는 세부사항이다

## 프레임워크 위험 요인

- 프레임워크의 아키텍처는 그다지 깔끔하지 않은 경우가 많다. 프레임워크는 의존성 규칙을 위반하는 경향이 있다.<br />
업무 객체를 만들 때, 프레임워크 제작자는 자신의 코드를 상속할 것을 요구한다. 엔티티를 만들 때 프레임워크 제작자는 자신의 프레임워크가 당신의 가장 안쪽 원과 결합되기를 원한다.<br />
프레임워크가 한번 안으로 들어오면 다시는 원밖으로 나가지 않을 것이다.
- 프레임워크는 애플리케이션의 초기 기능을 만드는 데는 도움이 될 것이지만 제품이 성숙해지면서 프레임워크가 제공하는 기능과 틀을 벗어나게 될 때 계속 프레임워크와 싸우게 될 것이다.
- 프레임워크는 당신에게 도움이 되지 않는 방향으로 진화할 수도 있다.
- 새로운 프레임워크가 등장해서 갈아타고 싶을 수도 있다.

## 해결책

프레임워크와 결합하지 말자

프레임워크를 아키텍처의 바깥쪽 원에 속하는 세부사항으로 취급하라

- 업무 객체를 만들 때 프레임워크가 자신의 기반 클래스로부터 파생하기를 요구한다면 거절하라
  - 대신 프락시를 만들고 업무 규칙에 플러그인할 수 있는 컴포넌트에 이들프락시를 위치시켜라
- 프레임워크가 핵심 코드 안으로 들어오지 못하게 하라
  - 대신 핵심 코드에 플러그인할 수 있는 컴포넌트에 프레임워크를 통합하고, 의존성 규칙을 준수하라 

