# topic 41. 테스트로 코딩하기

테스트의 주요한 이득은 테스트를 실행할 때가 아니라 테스트에 대해 생각하고, 테스트를 작성할 때 생긴다.

## 테스트가 코딩을 주도한다.

### 테스트가 코드의 첫 번째 사용자다.

다른 코드와 긴밀하게 결합된 함수나 메서드는 테스트하기 힘들다. <br />
즉, 무언가를 테스트하기 좋게 만들면 결합도도 낮아진다.

### 테스트 주도 개발

[켄트 벡의 테스트 주도 개발](https://github.com/cocoder16/reading-books/blob/master/TDD.md)

### TDD의 노예가 된 사람들

- 늘 테스트 커버리지 100%를 달성하기 위해 과도하게 많은 시간을 투자한다.
- 많은 수의 중복 테스트가 생긴다. 불필요한 테스트를 한다.
- 밑에서부터 시작하요 위로 올라가는 방식으로 설계를 한다.

상향식도 하향식도 잘 안된다. 상향식이나 하향식이 아니라 끝에서 끝까지(end to end) 만들어라.

# topic 42. 속성 기반 테스트

- 계약: 코드가 지켜야하는 '계약' (DBC)
- 불변식: 함수 실행 전후로 계속 어떤 부분의 상태에 대하여 참이 되는 조건
- 속성: 계약과 불변식
- 속성 기반 테스트: 코드에서 속성을 찾아내서 테스트 자동화에서 사용
- 속성 기반 테스트로 가정을 검증하라.

## 단위 테스트와 속성 기반 테스트는 서로 보완한다.

둘다 사용하자.

- 단위 테스트는 보통 입력값으로 정상적인 값과 경계값을 넣는다.
- 속성 기반 테스트는 입력값으로 임의로 생성되는 값을 넣는다. 매 테스트마다 다른 값을 입력하므로 통과할 수도, 실패할 수도 있다.

## 속성 기반 테스트가 실패했다면

어떤 매개 변수를 사용했는지 알아낸 다음 그 값을 이용하여 별도의 단위 테스트를 정식으로 추가하는 것이 좋다. <br />
이렇게 추가된 단위 테스트는 두 가지 역할을 한다.

1. 속성 기반 테스트의 여러 가지 다른 수행 결과와 상관없이 문제가 발생하는 상황에 집중할 수 있게 해준다.
2. 단위 테스트가 회귀 테스트 역할을 한다.
