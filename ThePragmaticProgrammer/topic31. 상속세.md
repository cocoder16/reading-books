# topic 31. 상속세

## 상속의 문제

### 코드를 공유하기 위해 상속을 쓸 때의 문제

상속도 일종의 결합이다. <br />
부모 클래스 내 코드가 변경하면 자식 클래스들과 그것을 사용하는 모든 코드들도 변경해야한다.

### 타입을 정의하기 위해 상속을 쓸 때의 문제

상속을 새로운 타입을 정의하는 방법으로 여기는 개발자들은 클래스 계층도를 좋아한다. <br />
클래스 사이의 아주 작은 미묘한 차이까지 잡아내서 표현하기 위해 계층 위에 계층을 덧붙이다 보면, <br />
클래스 계층도는 순식간에 벽면 전체를 덮는 괴물로 자라난다.

이런 복잡도는 애플리케이션을 더 취약하게 만드는데 변경 사항이 위나 아래로 여러 단계에 걸쳐 영향을 미칠 수 있기 때문이다.

더 나쁜 것은 다중 상속 문제이다. 제대로 모델링하려면 다중 상속이 필요할 떄가 많다. <br />
그래서 이제는 많은 객체 지향 언어에서 다중 상속을 지원하지 않는다.

## 더 나은 대안

1. 인터페이스 (프로토콜 or 트레이트 라고 부르기도 함)

인터페이스 선언들은 아무런 코드도 만들지 않는다. 그냥 클래스들이 이 인터페이스가 명세한대로 구현해야한다고 지시할 뿐이다.

**더 나은 이유**

- 타입으로 사용할 수 있고, 해당 인터페이스를 구현하는 클래스라면 무엇이든 그 타입과 호환된다.
- 상속 없이도 다형성을 가져다준다.

2. 위임

상속의 문제짚기: <br />
상속은 개발자들이 점점 더 메서드가 많은 클래스를 만들도록 유도한다. 부모 클래스는 수많은 메서드를 가지고 자식 클래스는 상속받은 메서드 중 적은 수만 사용하게 된다. <br />
자식 클래스는 사용하지 않는 부모 클래스 API를 모두 달고 다닌다.

위임의 장점: <br />
위임을 사용하면 부모 클래스 API를 전혀 노출하지 않을 수 있다. 결합이 사라지게 된다.

위임의 단점: <br />
더 많은 코드량

3. 믹스인, 트레이트, 카테고리, 프로토콜 확장 등

- 클래스나 객체에 상속을 사용하지 않고 새로운 기능을 추가하여 확장한다.
- 어떤 클래스의 몇가지 메서드만을 구현하는 믹스인을 일단 만들면 계속 재사용이 된다.
- 믹스인으로 기능을 공유하라

**결론: 상속보다는 믹스인, Has-A가 Is-A보다 낫다**

## 언제 무엇을 사용해야 하는가?

1. 인터페이스: 타입 정보를 공유하고 싶을 때
2. 위임: 기능을 더하고 싶을 때
3. 믹스인: 메서드를 공유하고 싶을 때
